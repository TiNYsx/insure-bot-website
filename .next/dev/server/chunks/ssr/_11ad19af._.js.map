{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tinysx/Desktop/insure-bot-website/components/chat-interface.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport { Send, Mic, Volume2 } from 'lucide-react'\nimport { ChatMessage } from '@/types'\n\ninterface ChatInterfaceProps {\n  chatMessages: ChatMessage[]\n  onMessagesUpdate: (messages: ChatMessage[]) => void\n  volume: number\n}\n\nexport default function ChatInterface({\n  chatMessages,\n  onMessagesUpdate,\n  volume,\n}: ChatInterfaceProps) {\n  const [messages, setMessages] = useState<ChatMessage[]>(chatMessages)\n  const [input, setInput] = useState('')\n  const [isRecording, setIsRecording] = useState(false)\n  const [isLoading, setIsLoading] = useState(false)\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null)\n  const audioChunksRef = useRef<Blob[]>([])\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n  const audioRef = useRef<HTMLAudioElement>(null)\n\n  useEffect(() => {\n    setMessages(chatMessages)\n  }, [chatMessages])\n\n  // Helper to update messages state and notify parent so chats are persisted\n  const updateMessages = (newMessages: ChatMessage[]) => {\n    setMessages(newMessages)\n    try {\n      onMessagesUpdate(newMessages)\n    } catch (err) {\n      console.error('onMessagesUpdate failed:', err)\n    }\n  }\n\n  // Auto scroll to bottom\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }, [messages])\n\n  const getWebhookUrl = () => {\n    const config = localStorage.getItem('admin-config')\n    if (config) {\n      const parsed = JSON.parse(config)\n      try {\n        // Validate the URL string\n        if (!parsed.webhookUrl) return null\n        new URL(parsed.webhookUrl)\n        return parsed.webhookUrl\n      } catch (err) {\n        console.warn('Invalid webhook URL in admin-config:', parsed.webhookUrl)\n        return null\n      }\n    }\n    return null\n  }\n\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true })\n      mediaRecorderRef.current = new MediaRecorder(stream)\n      audioChunksRef.current = []\n\n      mediaRecorderRef.current.ondataavailable = (event) => {\n        audioChunksRef.current.push(event.data)\n      }\n\n      mediaRecorderRef.current.onstop = async () => {\n        const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/wav' })\n        await sendAudio(audioBlob)\n        stream.getTracks().forEach(track => track.stop())\n      }\n\n      mediaRecorderRef.current.start()\n      setIsRecording(true)\n    } catch (err) {\n      console.error('Error accessing microphone:', err)\n      alert('Unable to access microphone')\n    }\n  }\n\n  const stopRecording = () => {\n    if (mediaRecorderRef.current) {\n      mediaRecorderRef.current.stop()\n      setIsRecording(false)\n    }\n  }\n\n  const sendAudio = async (audioBlob: Blob) => {\n    setIsLoading(true)\n    \n    // Create user message with audio\n    const userMessage: ChatMessage = {\n      id: Date.now().toString(),\n      type: 'user',\n      text: 'Voice message',\n      audio: URL.createObjectURL(audioBlob),\n      timestamp: new Date().toISOString(),\n    }\n\n    const updatedMessages = [...messages, userMessage]\n    updateMessages(updatedMessages)\n\n    // Send to webhook\n    const webhookUrl = getWebhookUrl()\n    if (!webhookUrl) {\n      const errorMessage: ChatMessage = {\n        id: (Date.now() + 1).toString(),\n        type: 'ai',\n        text: 'Webhook not configured or invalid. Please set a valid webhook URL in the admin settings.',\n        timestamp: new Date().toISOString(),\n      }\n      updateMessages([...updatedMessages, errorMessage])\n      setIsLoading(false)\n      return\n    }\n\n    try {\n      const formData = new FormData()\n      formData.append('audio', audioBlob)\n      formData.append('messages', JSON.stringify(updatedMessages.slice(-6)))\n\n      // Add a timeout to avoid hanging on network issues\n      const controller = new AbortController()\n      // Increase timeout to 5 minutes to accommodate long LLM responses\n      const timeout = setTimeout(() => controller.abort(), 300000)\n\n      const response = await fetch(webhookUrl, {\n        method: 'POST',\n        body: formData,\n        signal: controller.signal,\n      })\n      clearTimeout(timeout)\n\n      if (response.ok) {\n        const data = await response.json()\n        const aiMessage: ChatMessage = {\n          id: (Date.now() + 1).toString(),\n          type: 'ai',\n          text: data.output || 'Response received',\n          audio: data.audio ? `data:audio/mp3;base64,${data.audio}` : undefined,\n          timestamp: new Date().toISOString(),\n        }\n        const finalMessages = [...updatedMessages, aiMessage]\n        updateMessages(finalMessages)\n      } else {\n        console.error('Webhook returned non-OK status:', response.status)\n        const errorMessage: ChatMessage = {\n          id: (Date.now() + 1).toString(),\n          type: 'ai',\n          text: `Webhook error: ${response.status} ${response.statusText}`,\n          timestamp: new Date().toISOString(),\n        }\n        updateMessages([...updatedMessages, errorMessage])\n      }\n    } catch (err) {\n      console.error('Error sending audio:', err)\n      const errorMessage: ChatMessage = {\n        id: (Date.now() + 1).toString(),\n        type: 'ai',\n        text: err && (err as any).name === 'AbortError' ? 'Request timed out. Please try again.' : 'Failed to send your message. Please check your network or webhook and try again.',\n        timestamp: new Date().toISOString(),\n      }\n      updateMessages([...updatedMessages, errorMessage])\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const sendMessage = async () => {\n    if (!input.trim()) return\n\n    setIsLoading(true)\n    const userMessage: ChatMessage = {\n      id: Date.now().toString(),\n      type: 'user',\n      text: input,\n      timestamp: new Date().toISOString(),\n    }\n\n    const updatedMessages = [...messages, userMessage]\n    updateMessages(updatedMessages)\n    setInput('')\n\n    const webhookUrl = getWebhookUrl()\n    if (!webhookUrl) {\n      const errorMessage: ChatMessage = {\n        id: (Date.now() + 1).toString(),\n        type: 'ai',\n        text: 'Webhook not configured or invalid. Please set a valid webhook URL in the admin settings.',\n        timestamp: new Date().toISOString(),\n      }\n      updateMessages([...updatedMessages, errorMessage])\n      setIsLoading(false)\n      return\n    }\n\n    try {\n      const controller = new AbortController()\n      // Increase timeout to 5 minutes to accommodate long LLM responses\n      const timeout = setTimeout(() => controller.abort(), 300000)\n\n      const response = await fetch(webhookUrl, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          message: input,\n          messages: updatedMessages.slice(-6),\n        }),\n        signal: controller.signal,\n      })\n      clearTimeout(timeout)\n\n      if (response.ok) {\n        const data = await response.json()\n        const aiMessage: ChatMessage = {\n          id: (Date.now() + 1).toString(),\n          type: 'ai',\n          text: data.output || 'Response received',\n          audio: data.audio ? `data:audio/mp3;base64,${data.audio}` : undefined,\n          timestamp: new Date().toISOString(),\n        }\n        const finalMessages = [...updatedMessages, aiMessage]\n        updateMessages(finalMessages)\n      } else {\n        console.error('Webhook returned non-OK status:', response.status)\n        const errorMessage: ChatMessage = {\n          id: (Date.now() + 1).toString(),\n          type: 'ai',\n          text: `Webhook error: ${response.status} ${response.statusText}`,\n          timestamp: new Date().toISOString(),\n        }\n        updateMessages([...updatedMessages, errorMessage])\n      }\n    } catch (err) {\n      console.error('Error sending message:', err)\n      const errorMessage: ChatMessage = {\n        id: (Date.now() + 1).toString(),\n        type: 'ai',\n        text: err && (err as any).name === 'AbortError' ? 'Request timed out. Please try again.' : 'Failed to send your message. Please check your network or webhook and try again.',\n        timestamp: new Date().toISOString(),\n      }\n      updateMessages([...updatedMessages, errorMessage])\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const playAudio = (audioUrl: string) => {\n    if (audioRef.current) {\n      audioRef.current.src = audioUrl\n      audioRef.current.volume = volume / 100\n      audioRef.current.play()\n    }\n  }\n\n  return (\n    <div className=\"flex-1 flex flex-col bg-background\">\n      {/* Messages */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        {messages.length === 0 ? (\n          <div className=\"flex items-center justify-center h-full text-muted-foreground\">\n            <div className=\"text-center\">\n              <p className=\"text-lg mb-2\">Start your consultation</p>\n              <p className=\"text-sm\">Send a message or use the voice button</p>\n            </div>\n          </div>\n        ) : (\n          messages.map(msg => (\n            <div\n              key={msg.id}\n              className={`flex ${msg.type === 'user' ? 'justify-end' : 'justify-start'}`}\n            >\n              <div\n                className={`max-w-xs lg:max-w-md px-4 py-3 rounded-lg ${\n                  msg.type === 'user'\n                    ? 'bg-primary text-primary-foreground'\n                    : 'bg-muted text-foreground border border-border'\n                }`}\n              >\n                <p className=\"text-sm\">{msg.text}</p>\n                {msg.audio && (\n                  <button\n                    onClick={() => playAudio(msg.audio!)}\n                    className=\"mt-2 flex items-center gap-2 text-xs opacity-80 hover:opacity-100\"\n                  >\n                    <Volume2 size={14} />\n                    Play\n                  </button>\n                )}\n              </div>\n            </div>\n          ))\n        )}\n        {isLoading && (\n          <div className=\"flex justify-start\">\n            <div className=\"bg-muted text-foreground px-4 py-3 rounded-lg border border-border\">\n              <div className=\"flex gap-2\">\n                <div className=\"w-2 h-2 bg-muted-foreground rounded-full animate-bounce\"></div>\n                <div className=\"w-2 h-2 bg-muted-foreground rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\n                <div className=\"w-2 h-2 bg-muted-foreground rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n              </div>\n            </div>\n          </div>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Input Area */}\n      <div className=\"border-t border-border p-4 bg-card\">\n        <div className=\"flex gap-3\">\n          <button\n            onClick={isRecording ? stopRecording : startRecording}\n            className={`p-3 rounded-lg transition-all ${\n              isRecording\n                ? 'bg-destructive text-destructive-foreground'\n                : 'bg-secondary text-secondary-foreground hover:bg-secondary/90'\n            }`}\n            title={isRecording ? 'Click to stop recording' : 'Click to start recording'}\n          >\n            <Mic size={20} />\n          </button>\n          <input\n            type=\"text\"\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            onKeyPress={(e) => e.key === 'Enter' && sendMessage()}\n            placeholder=\"Type your message...\"\n            className=\"flex-1 px-4 py-2 bg-input border border-input rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\n            disabled={isRecording || isLoading}\n          />\n          <button\n            onClick={sendMessage}\n            disabled={isRecording || isLoading || !input.trim()}\n            className=\"p-3 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\n          >\n            <Send size={20} />\n          </button>\n        </div>\n      </div>\n      <audio ref={audioRef} />\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 499, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tinysx/Desktop/insure-bot-website/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,oOAAO,EAAC,IAAA,8LAAI,EAAC;AACtB"}},
    {"offset": {"line": 514, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tinysx/Desktop/insure-bot-website/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,kPAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,4SAAI,GAAG;IAE9B,qBACE,6WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 573, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tinysx/Desktop/insure-bot-website/components/left-panel.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Trash2, Plus } from 'lucide-react'\nimport { ChatMessage } from '@/types'\n\ninterface LeftPanelProps {\n  chats: Array<{ id: string; title: string; timestamp: string; messages: ChatMessage[] }>\n  currentChatId: string | null\n  onNewChat: () => void\n  onSelectChat: (id: string) => void\n  onDeleteChat: (id: string) => void\n  volume: number\n  onVolumeChange: (volume: number) => void\n}\n\nexport default function LeftPanel({\n  chats,\n  currentChatId,\n  onNewChat,\n  onSelectChat,\n  onDeleteChat,\n  volume,\n  onVolumeChange,\n}: LeftPanelProps) {\n  const [showSettings, setShowSettings] = useState(false)\n\n  return (\n    <div className=\"w-64 bg-card border-r border-border flex flex-col h-screen shadow-sm\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-border\">\n        <h1 className=\"text-xl font-bold text-card-foreground flex items-center gap-2\">\n          <span className=\"w-8 h-8 bg-primary text-primary-foreground rounded-lg flex items-center justify-center text-sm font-bold\">\n            IB\n          </span>\n          Insure Bot\n        </h1>\n      </div>\n\n      {/* New Chat Button */}\n      <div className=\"p-4\">\n        <Button\n          onClick={onNewChat}\n          className=\"w-full bg-primary hover:bg-primary/90 text-primary-foreground rounded-lg font-medium flex items-center justify-center gap-2\"\n        >\n          <Plus size={20} />\n          New Chat\n        </Button>\n      </div>\n\n      {/* Chat History */}\n      <div className=\"flex-1 overflow-y-auto px-2 space-y-2\">\n        {chats.length === 0 ? (\n          <div className=\"text-center py-8 text-muted-foreground text-sm\">\n            No chats yet. Start a new one!\n          </div>\n        ) : (\n          chats.map(chat => (\n            <div\n              key={chat.id}\n              className={`p-3 rounded-lg cursor-pointer transition-all group ${\n                currentChatId === chat.id\n                  ? 'bg-primary/10 border border-primary/30'\n                  : 'hover:bg-muted border border-transparent'\n              }`}\n              onClick={() => onSelectChat(chat.id)}\n            >\n              <div className=\"flex justify-between items-start gap-2\">\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"font-medium text-sm truncate text-card-foreground\">\n                    {chat.title}\n                  </p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    {new Date(parseInt(chat.id)).toLocaleDateString()}\n                  </p>\n                </div>\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation()\n                    onDeleteChat(chat.id)\n                  }}\n                  className=\"opacity-0 group-hover:opacity-100 transition-opacity\"\n                >\n                  <Trash2 size={16} className=\"text-destructive\" />\n                </button>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* Settings Section */}\n      <div className=\"p-4 border-t border-border\">\n        <button\n          onClick={() => setShowSettings(!showSettings)}\n          className=\"w-full text-left text-sm font-medium text-card-foreground hover:text-primary transition-colors\"\n        >\n          Settings\n        </button>\n        {showSettings && (\n          <div className=\"mt-3 space-y-3\">\n            <div>\n              <label className=\"text-xs text-muted-foreground block mb-2\">\n                Volume: {volume}%\n              </label>\n              <input\n                type=\"range\"\n                min=\"0\"\n                max=\"100\"\n                value={volume}\n                onChange={(e) => onVolumeChange(parseInt(e.target.value))}\n                className=\"w-full\"\n              />\n            </div>\n            <a\n              href=\"/admin\"\n              className=\"block text-xs text-primary hover:text-primary/80 transition-colors\"\n            >\n              Admin Panel â†’\n            </a>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAJA;;;;;AAiBe,SAAS,UAAU,EAChC,KAAK,EACL,aAAa,EACb,SAAS,EACT,YAAY,EACZ,YAAY,EACZ,MAAM,EACN,cAAc,EACC;IACf,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,gVAAQ,EAAC;IAEjD,qBACE,6WAAC;QAAI,WAAU;;0BAEb,6WAAC;gBAAI,WAAU;0BACb,cAAA,6WAAC;oBAAG,WAAU;;sCACZ,6WAAC;4BAAK,WAAU;sCAA2G;;;;;;wBAEpH;;;;;;;;;;;;0BAMX,6WAAC;gBAAI,WAAU;0BACb,cAAA,6WAAC,qIAAM;oBACL,SAAS;oBACT,WAAU;;sCAEV,6WAAC,8RAAI;4BAAC,MAAM;;;;;;wBAAM;;;;;;;;;;;;0BAMtB,6WAAC;gBAAI,WAAU;0BACZ,MAAM,MAAM,KAAK,kBAChB,6WAAC;oBAAI,WAAU;8BAAiD;;;;;2BAIhE,MAAM,GAAG,CAAC,CAAA,qBACR,6WAAC;wBAEC,WAAW,CAAC,mDAAmD,EAC7D,kBAAkB,KAAK,EAAE,GACrB,2CACA,4CACJ;wBACF,SAAS,IAAM,aAAa,KAAK,EAAE;kCAEnC,cAAA,6WAAC;4BAAI,WAAU;;8CACb,6WAAC;oCAAI,WAAU;;sDACb,6WAAC;4CAAE,WAAU;sDACV,KAAK,KAAK;;;;;;sDAEb,6WAAC;4CAAE,WAAU;sDACV,IAAI,KAAK,SAAS,KAAK,EAAE,GAAG,kBAAkB;;;;;;;;;;;;8CAGnD,6WAAC;oCACC,SAAS,CAAC;wCACR,EAAE,eAAe;wCACjB,aAAa,KAAK,EAAE;oCACtB;oCACA,WAAU;8CAEV,cAAA,6WAAC,wSAAM;wCAAC,MAAM;wCAAI,WAAU;;;;;;;;;;;;;;;;;uBAxB3B,KAAK,EAAE;;;;;;;;;;0BAiCpB,6WAAC;gBAAI,WAAU;;kCACb,6WAAC;wBACC,SAAS,IAAM,gBAAgB,CAAC;wBAChC,WAAU;kCACX;;;;;;oBAGA,8BACC,6WAAC;wBAAI,WAAU;;0CACb,6WAAC;;kDACC,6WAAC;wCAAM,WAAU;;4CAA2C;4CACjD;4CAAO;;;;;;;kDAElB,6WAAC;wCACC,MAAK;wCACL,KAAI;wCACJ,KAAI;wCACJ,OAAO;wCACP,UAAU,CAAC,IAAM,eAAe,SAAS,EAAE,MAAM,CAAC,KAAK;wCACvD,WAAU;;;;;;;;;;;;0CAGd,6WAAC;gCACC,MAAK;gCACL,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;AAQb"}},
    {"offset": {"line": 796, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tinysx/Desktop/insure-bot-website/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport ChatInterface from '@/components/chat-interface'\nimport LeftPanel from '@/components/left-panel'\nimport { ChatMessage } from '@/types'\n\nexport default function Home() {\n  const [chats, setChats] = useState<Array<{ id: string; title: string; timestamp: string; messages: ChatMessage[] }>>([])\n  const [currentChatId, setCurrentChatId] = useState<string | null>(null)\n  const [volume, setVolume] = useState(50)\n\n  // Load data from localStorage on mount\n  useEffect(() => {\n    try {\n      const savedChats = localStorage.getItem('insure-bot-chats')\n      const savedVolume = localStorage.getItem('insure-bot-volume')\n      if (savedChats) setChats(JSON.parse(savedChats))\n      if (savedVolume) setVolume(parseInt(savedVolume))\n    } catch (err) {\n      console.error('Failed to load saved data from localStorage:', err)\n      // If parsing or access fails, clear potentially corrupted keys\n      try { localStorage.removeItem('insure-bot-chats') } catch {}\n      try { localStorage.removeItem('insure-bot-volume') } catch {}\n    }\n  }, [])\n\n  // Save chats to localStorage whenever they change\n  useEffect(() => {\n    const isQuotaExceeded = (e: any) => {\n      if (!e) return false\n      return (\n        e.name === 'QuotaExceededError' ||\n        e.name === 'NS_ERROR_DOM_QUOTA_REACHED' ||\n        // numeric codes for older browsers\n        e.code === 22 || e.code === 1014\n      )\n    }\n\n    try {\n      localStorage.setItem('insure-bot-chats', JSON.stringify(chats))\n    } catch (err: any) {\n      console.error('Failed to save chats to localStorage:', err)\n      if (isQuotaExceeded(err)) {\n        // Try to shrink the payload and retry: keep most recent chats, and trim messages per chat\n        try {\n          const maxChats = 10\n          const maxMessagesPerChat = 10\n          const trimmed = chats\n            .slice(0, maxChats)\n            .map(c => ({ ...c, messages: c.messages ? c.messages.slice(-maxMessagesPerChat) : [] }))\n          localStorage.setItem('insure-bot-chats', JSON.stringify(trimmed))\n          // update in-memory to the trimmed version so UI matches stored data\n          setChats(trimmed)\n        } catch (err2) {\n          console.error('Failed to save trimmed chats to localStorage:', err2)\n          try { localStorage.removeItem('insure-bot-chats') } catch {}\n          setChats([])\n        }\n      }\n    }\n  }, [chats])\n\n  // Save volume to localStorage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('insure-bot-volume', volume.toString())\n  }, [volume])\n\n  const createNewChat = () => {\n    const newChatId = Date.now().toString()\n    const newChat = {\n      id: newChatId,\n      title: 'New Chat',\n      timestamp: new Date().toLocaleString(),\n      messages: [],\n    }\n    setChats([newChat, ...chats])\n    setCurrentChatId(newChatId)\n  }\n\n  const deleteChat = (id: string) => {\n    setChats(chats.filter(chat => chat.id !== id))\n    if (currentChatId === id) {\n      setCurrentChatId(chats.length > 1 ? chats[0].id : null)\n    }\n  }\n\n  const selectChat = (id: string) => {\n    setCurrentChatId(id)\n  }\n\n  const updateChatMessages = (messages: ChatMessage[]) => {\n    // When persisting messages, only keep audio for the current chat and\n    // only the most recent user and ai audio blobs to save storage space.\n    const sanitizeMessagesForStorage = (msgs: ChatMessage[], isCurrent: boolean) => {\n      if (!isCurrent) {\n        // For non-current chats remove all audio references\n        return msgs.map(m => ({ ...m, audio: undefined }))\n      }\n\n      // For current chat: keep only the latest user audio and the latest ai audio\n      let latestUserAudioId: string | null = null\n      let latestAiAudioId: string | null = null\n\n      for (let i = msgs.length - 1; i >= 0; i--) {\n        const m = msgs[i]\n        if (!latestUserAudioId && m.type === 'user' && m.audio) latestUserAudioId = m.id\n        if (!latestAiAudioId && m.type === 'ai' && m.audio) latestAiAudioId = m.id\n        if (latestUserAudioId && latestAiAudioId) break\n      }\n\n      return msgs.map(m => {\n        if (m.type === 'user') {\n          return { ...m, audio: m.id === latestUserAudioId ? m.audio : undefined }\n        }\n        if (m.type === 'ai') {\n          return { ...m, audio: m.id === latestAiAudioId ? m.audio : undefined }\n        }\n        return { ...m, audio: undefined }\n      })\n    }\n\n    setChats(chats.map(chat =>\n      chat.id === currentChatId\n        ? {\n            ...chat,\n            messages: sanitizeMessagesForStorage(messages, true),\n            title: messages[0]?.text?.substring(0, 30) || 'New Chat',\n          }\n        : {\n            ...chat,\n            messages: sanitizeMessagesForStorage(chat.messages || [], false),\n          }\n    ))\n  }\n\n  const currentChat = chats.find(chat => chat.id === currentChatId)\n\n  return (\n    <div className=\"flex h-screen bg-background\">\n      <LeftPanel\n        chats={chats}\n        currentChatId={currentChatId}\n        onNewChat={createNewChat}\n        onSelectChat={selectChat}\n        onDeleteChat={deleteChat}\n        volume={volume}\n        onVolumeChange={setVolume}\n      />\n      {currentChatId ? (\n        <ChatInterface\n          chatMessages={currentChat?.messages || []}\n          onMessagesUpdate={updateChatMessages}\n          volume={volume}\n        />\n      ) : (\n        <div className=\"flex-1 flex items-center justify-center text-muted-foreground\">\n          <div className=\"text-center\">\n            <h1 className=\"text-3xl font-bold mb-2 text-foreground\">Welcome to Insure Bot</h1>\n            <p className=\"mb-6\">Start a new chat to begin your insurance consultation</p>\n            <button\n              onClick={createNewChat}\n              className=\"px-6 py-2 bg-primary text-primary-foreground rounded-lg hover:opacity-90 transition-opacity\"\n            >\n              Start New Chat\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}